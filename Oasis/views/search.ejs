<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />

  <title>search</title>
</head>

<body>
  <!-- Begin container -->
  <div class="container">
    <!-- Begin Jumbotron -->
    <div class="jumbotron">
      <h1>LISTINGS</h1>
      <p class="lead">
        Total listings are <strong><%= data %></strong> and counting more...
      </p>

      <!-- Begin Form-->
      <form action="/search" method="POST">
        <div class="form-row">
          <div class="col-7">
            <label for="minPrice"></label>
            <input type="text" , name="min" value="<%= min %>" class="form-control" id="minPrice"
              placeholder="Min Price" />
          </div>
          <div class="col">
            <label for="maxPrice"></label>
            <input type="text" , name="max" value="<%= max %>" class="form-control" id="maxPrice"
              placeholder="Max Price" />
          </div>
        </div>
        <br />
        <select class="custom-select" name="type" id="inputGroupSelect04">
          <option value="" <%=all %>>All</option>
          <option value="room" <%=room %>>Room</option>
          <option value="apartment" <%=apartment %>>Apartment</option>
          <option value="house" <%=house %>>House</option>
        </select>
        <button type="submit" class="btn btn-primary btn-lg">Search</button>
      </form>
      <!-- End Form-->

      <form action="/filter" method="POST">
        <h7><i>miles from campus</i></h7>
        <div class="input-group">
          <select class="custom-select" name="distance" id="inputGroupSelect04">
            <option value="" <%=none %>>Choose...</option>
            <option value="1" <%=first %>>
              < 1 mile</option> <option value="5" <%=second %>>
                < 5 miles </option> <option value="50" <%=third %>> > 5 miles
            </option>
          </select>
          <div class="input-group-append">
            <button class="btn btn-primary btn-lg" type="submit">filter</button>
          </div>
        </div>
      </form>
      <br />
      <hr />

      <!-- Begin Result Card-->

      <% if ( resultCount > 0) { %>
      <h1>Result</h1>
      <p>Found <%= resultCount %> properties that match your search critera.</p>
      <% } %>

      <% for (var i=0; i < dropCount; i++) { %>
      <div class="card" style="width: 18rem;">
        <!-- <img src="" alt="" /> -->
        <img src="<%= listImg[i] %>" width="300" height="200" class="card-img-top" alt="a house">
        <div class="card-body">
          <h5 class="card-title">A beautiful house $<%= price[i] %></h5>
          <p class="card-text">A beutiful house in a quite neighborhood.</p>
          <ul>
            <li><%= address[i] %></li>
            <li><%= city[i] %> , <%= state[i] %> <%= zipcode[i] %></li>
            <li>
              <%= room[i] %> bed <%= bathroom[i] %> bath <%= size[i] %> sq. ft
            </li>
          </ul>
          <a href="/details/<%= id[i] %>">See more!</a>
          <!-- <div id="m1" style="width:150px; height:50px; 
            margin-left:80px;"></div> -->
          <!-- <div id="m2" style="width:150px; height:50px;
            margin-left:80px;"></div> -->
        </div>
      </div>
      <br />
      <% } %>
      <!-- End Result Card -->
    </div>
    <!-- End Jumbotron -->
  </div>
  <!-- end container -->

  <!-- Google Maps API -->
  <!-- <h3 align="center">My Google Maps Demo</h3> -->
  <!-- <style>
    /* Set the size of the div element that contains the map */
    #map {
      height: 400px;  /* The height is 400 pixels */
      width: 100%;  /* The width is the width of the web page */
      }
  </style> -->
  <!--The div element for the map -->
  <!-- <div id="map"></div> -->
  <!-- <script>
    // var geocoder;
    // var map, map1;
    // var test;
    // function initMap() {
    // // create the maps
    // var myOptions = {
    //     zoom: 15,
    //     center: new google.maps.LatLng(37.721984, -122.478211),
    // }
    // map = new google.maps.Map(document.getElementById("m1"), myOptions);
    // //map2 = new google.maps.Map(document.getElementById("m2"), myOptions);
    // }
    var home = "1219 39th Ave San Francisco California";
    // Initialize and add the map
    function initMap() {
      geocoder = new google.maps.Geocoder();
      // The location of SFSU
      var sfsu = {lat: 37.721984, lng: -122.478211};
      // The map, centered at SFSU
      map = new google.maps.Map(
      document.getElementById('map'), {zoom: 15, center: sfsu});
      // The marker, positioned at SFSU
      var marker = new google.maps.Marker({position: sfsu, map: map});
      codeAddress(home)
      // <% if (resultCount > 0) { %>
      //   
      //   codeAddress(test);
      // <% } %>
    }
    function codeAddress(address) 
    {
      geocoder.geocode( {address:address}, function(results, status) 
      {
        if (status == google.maps.GeocoderStatus.OK) 
        {
          map.setCenter(results[0].geometry.location);
          //center the map over the result
          //place a marker at the location
          var marker = new google.maps.Marker(
          {
            map: map,
            position: results[0].geometry.location
          });
        } else {
        alert('Geocode was not successful for the following reason: ' + status);
        }
      });
    }
  </script> -->


  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS, then Google Maps API -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCpfgvpdTvB1mOc84v5a4-cFH_x48OLhFU&callback=initMap">
  </script>
</body>

</html>